<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">  
<html>  
	 <head>  
	  <meta http-equiv="content-type" content="text/html; charset=utf-8">  
	  <title> upload image to db demo </title> 
	  <script> 
		  window.onload = function(){ 
			var input = document.getElementById("demo_input"); 
			var result= document.getElementById("result"); 
			var img_area = document.getElementById("img_area"); 
			if ( typeof(FileReader) === 'undefined' ){
			  result.innerHTML = "抱歉，你的浏览器不支持 FileReader，请使用现代浏览器操作！"; 
			  input.setAttribute('disabled','disabled'); 
			}else{
			  input.addEventListener('change',readFile,false);
			} 
		  }
		  function readFile(){
			var file = this.files[0]; 
			//这里我们判断下类型如果不是图片就返回 去掉就可以上传任意文件  
			if(!/image\/\w+/.test(file.type)){
			  alert("请确保文件为图像类型"); 
			  return false; 
			}
			var reader = new FileReader(); 
			reader.readAsDataURL(file); 
			console.log();
			reader.onload = function(e){ 
				result.innerHTML = this.result; 
				//img_area.innerHTML = '<div class="sitetip">图片img标签展示：</div>![]('+this.result+')'; 
			}
		  } 
		</script> 
		</head>

<body> 
  <form action="uploadimage.php" method="post" enctype="multipart/form-data">
		<p>名称：<input type="text" name="name"></p>
	  <input type="file" value="sdgsdg" id="demo_input" /> 
	  <textarea name="img" id="result" rows=30 cols=100></textarea> 
	  <p id="img_area"></p> 
	  <p><input type="hidden" name="action" value="add"><input type="submit" name="b1" value="提交"></p>
	</form>
	  
	 </body>  
</html>  